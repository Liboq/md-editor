# 需求文档

## 简介

一个 Markdown 编辑器 Web 应用，具有双栏布局、实时预览、可定制主题系统（含 6 种内置主题）和微信公众号复制功能（保留行内样式）。

## 术语表

- **编辑器 (Editor)**: 左侧面板组件，用户在此编写和编辑 Markdown 内容
- **预览面板 (Preview_Pane)**: 右侧面板组件，实时将 Markdown 渲染为带样式的 HTML
- **主题系统 (Theme_System)**: 负责管理和应用预览内容视觉主题的模块
- **主题 (Theme)**: 定义颜色、排版、间距和视觉外观的 CSS 样式集合
- **行内样式转换器 (Inline_Style_Converter)**: 将 CSS 类转换为行内样式以供剪贴板导出的模块
- **剪贴板管理器 (Clipboard_Manager)**: 处理带格式 HTML 内容复制操作的模块

## 需求

### 需求 1: 双栏布局

**用户故事:** 作为内容创作者，我希望并排查看 Markdown 内容及其渲染预览，以便同时编写和验证格式。

#### 验收标准

1. 当应用加载时，编辑器应显示双栏布局，左侧为编辑器，右侧为预览面板
2. 当用户调整浏览器窗口大小时，编辑器应响应式地保持双栏布局
3. 当视口宽度低于 768px 时，编辑器应垂直堆叠面板，编辑器在上
4. 编辑器应占据桌面视图可用宽度的 50%
5. 预览面板应占据桌面视图可用宽度的 50%

### 需求 2: 实时 Markdown 编辑

**用户故事:** 作为内容创作者，我希望输入 Markdown 后立即看到渲染输出，以便高效创建格式化内容。

#### 验收标准

1. 当用户在编辑器中输入时，预览面板应在 100ms 内更新以反映更改
2. 编辑器应支持标准 Markdown 语法，包括标题、粗体、斜体、链接、图片、代码块、列表、引用和表格
3. 当编辑器内容变化时，预览面板应解析并渲染 Markdown 内容
4. 编辑器应在内容更新期间保持滚动位置
5. 当用户在编辑器中滚动时，预览面板应可选地同步滚动位置

### 需求 3: 主题系统架构

**用户故事:** 作为内容创作者，我希望在不同视觉主题之间切换，以便自定义内容的外观。

#### 验收标准

1. 主题系统应提供注册和检索主题的接口
2. 当选择主题时，主题系统应立即将主题样式应用到预览面板
3. 主题系统应将用户的主题偏好存储在 localStorage 中
4. 当应用加载时，主题系统应恢复之前选择的主题
5. 主题系统应通过定义的主题 schema 支持自定义主题注册

### 需求 4: 内置主题

**用户故事:** 作为内容创作者，我希望访问专业设计的主题，以便无需设计专业知识即可创建视觉吸引力的内容。

#### 验收标准

1. 主题系统应包含一个简洁、极简风格的默认白色主题
2. 主题系统应包含一个深黑背景 (#000000) 的 OLED 暗黑主题，护眼舒适
3. 主题系统应包含一个墨绿主题，灵感来自墨滴风格
4. 主题系统应包含一个舒适暖色调的橙色暖色主题
5. 主题系统应包含一个现代紫色强调的紫色优雅主题
6. 主题系统应包含一个专业技术美感的蓝色科技主题
7. 显示主题时，主题系统应显示主题名称和预览缩略图

### 需求 5: 自定义主题支持

**用户故事:** 作为高级用户，我希望创建和保存自己的主题，以便匹配个人或品牌风格。

#### 验收标准

1. 主题系统应提供用于创建自定义主题的主题编辑器界面
2. 当用户创建自定义主题时，主题系统应验证主题配置
3. 主题系统应允许自定义主色、背景色、文字颜色、标题样式、代码块样式和链接样式
4. 当保存自定义主题时，主题系统应将其持久化到 localStorage
5. 主题系统应允许用户将自定义主题导出为 JSON
6. 主题系统应允许用户从 JSON 导入主题

### 需求 6: 复制到微信公众号

**用户故事:** 作为内容创作者，我希望将带样式的内容复制到微信公众号编辑器，以便发布格式化文章而不丢失样式。

#### 验收标准

1. 当用户点击复制按钮时，行内样式转换器应将所有 CSS 类转换为行内样式
2. 剪贴板管理器应将带行内样式的 HTML 复制到系统剪贴板
3. 当粘贴到微信公众号编辑器时，内容应保留所有视觉格式
4. 行内样式转换器应处理所有主题特定样式，包括颜色、字体、间距和边框
5. 如果复制操作失败，剪贴板管理器应向用户显示错误消息
6. 当复制成功时，剪贴板管理器应显示成功通知

### 需求 7: 编辑器功能

**用户故事:** 作为内容创作者，我希望有实用的编辑功能，以便更高效地编写 Markdown。

#### 验收标准

1. 编辑器应提供带有常用 Markdown 格式化按钮的工具栏
2. 当用户选择文本并点击格式化按钮时，编辑器应用适当的 Markdown 语法包裹选中内容
3. 编辑器应支持常用格式化操作的键盘快捷键
4. 编辑器应可选地显示行号
5. 编辑器应支持代码块和列表的 Tab 缩进

### 需求 8: 响应式设计

**用户故事:** 作为用户，我希望编辑器在不同屏幕尺寸上都能良好工作，以便在各种设备上使用。

#### 验收标准

1. 当视口宽度为 1024px 或以上时，编辑器应显示完整的双栏布局带工具栏
2. 当视口宽度在 768px 到 1023px 之间时，编辑器应显示紧凑的双栏布局
3. 当视口宽度低于 768px 时，编辑器应显示带标签切换的堆叠布局
4. 编辑器应在最小宽度 320px 时保持可用性
