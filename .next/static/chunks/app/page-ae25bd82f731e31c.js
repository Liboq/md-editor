(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7360:(e,n,t)=>{Promise.resolve().then(t.bind(t,8403))},8403:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>eZ});var o=t(5155),r=t(2115),a=t(64),i=t(3999);let c=a.bL,l=r.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,o.jsx)(a.B8,{ref:n,className:(0,i.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...r})});l.displayName=a.B8.displayName;let s=r.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,o.jsx)(a.l9,{ref:n,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...r})});s.displayName=a.l9.displayName;let d=r.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,o.jsx)(a.UC,{ref:n,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});d.displayName=a.UC.displayName;let m=r.forwardRef((e,n)=>{let{value:t,onChange:r,className:a,placeholder:c="在此输入 Markdown 内容...",onKeyDown:l,onScroll:s}=e;return(0,o.jsx)("textarea",{ref:n,value:t,onChange:e=>r(e.target.value),onKeyDown:l,onScroll:s,placeholder:c,className:(0,i.cn)("w-full h-full resize-none border rounded-md p-3 font-mono text-sm","bg-background text-foreground","focus:outline-none focus:ring-2 focus:ring-ring","placeholder:text-muted-foreground",a),spellCheck:!1})});m.displayName="Editor";var h=t(9727),u=t(9144),p=t(8440),f=t(2705),g=t(2406),x=t(8164),b=t(7213),w=t(9621),v=t(5968),j=t(9140),y=t(224),k=t(5112),N=t(4357),C=t(9708),S=t(2085);let z=(0,S.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),R=r.forwardRef((e,n)=>{let{className:t,variant:r,size:a,asChild:c=!1,...l}=e,s=c?C.DX:"button";return(0,o.jsx)(s,{className:(0,i.cn)(z({variant:r,size:a,className:t})),ref:n,...l})});R.displayName="Button";var B=t(7777);let P=[{action:"bold",icon:h.A,label:"粗体",shortcut:"Ctrl+B"},{action:"italic",icon:u.A,label:"斜体",shortcut:"Ctrl+I"},{action:"h1",icon:p.A,label:"一级标题"},{action:"h2",icon:f.A,label:"二级标题"},{action:"h3",icon:g.A,label:"三级标题"},{action:"link",icon:x.A,label:"链接",shortcut:"Ctrl+K"},{action:"image",icon:b.A,label:"图片"},{action:"code",icon:w.A,label:"行内代码"},{action:"ul",icon:v.A,label:"无序列表"},{action:"ol",icon:j.A,label:"有序列表"},{action:"quote",icon:y.A,label:"引用"},{action:"table",icon:k.A,label:"表格"}];function A(e){let{onFormat:n,onCopyToWeChat:t,className:r}=e;return(0,o.jsx)(B.TooltipProvider,{delayDuration:300,children:(0,o.jsxs)("div",{className:(0,i.cn)("flex items-center gap-1 flex-wrap",r),children:[P.map(e=>(0,o.jsxs)(B.m_,{children:[(0,o.jsx)(B.k$,{asChild:!0,children:(0,o.jsxs)(R,{variant:"ghost",size:"icon",className:"h-8 w-8 cursor-pointer",onClick:()=>n(e.action),children:[(0,o.jsx)(e.icon,{className:"h-4 w-4"}),(0,o.jsx)("span",{className:"sr-only",children:e.label})]})}),(0,o.jsx)(B.ZI,{children:(0,o.jsxs)("p",{children:[e.label,e.shortcut&&(0,o.jsx)("span",{className:"ml-2 text-muted-foreground",children:e.shortcut})]})})]},e.action)),t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"w-px h-6 bg-border mx-1"}),(0,o.jsxs)(B.m_,{children:[(0,o.jsx)(B.k$,{asChild:!0,children:(0,o.jsxs)(R,{variant:"outline",size:"sm",className:"h-8 gap-1 cursor-pointer",onClick:t,children:[(0,o.jsx)(N.A,{className:"h-4 w-4"}),(0,o.jsx)("span",{className:"hidden sm:inline",children:"复制到公众号"})]})}),(0,o.jsx)(B.ZI,{children:(0,o.jsx)("p",{children:"复制带样式的内容到微信公众号"})})]})]})]})})}function Y(e,n,t){return{newText:e.slice(0,n)+t+e.slice(n),newCursorPos:n+t.length}}function H(e,n,t){let o=n;for(;o>0&&"\n"!==e[o-1];)o--;return{newText:e.slice(0,o)+t+e.slice(o),newCursorPos:n+t.length}}let T=r.forwardRef((e,n)=>{let{html:t,className:r}=e;return t?(0,o.jsx)("div",{ref:n,className:(0,i.cn)("preview-content",r),dangerouslySetInnerHTML:{__html:t}}):(0,o.jsx)("div",{ref:n,className:(0,i.cn)("preview-content text-muted-foreground",r),children:"预览将在此显示..."})});T.displayName="Preview";var D=t(7771);function I(){let{activeTheme:e}=(0,D.D)(),n=function(e){if(e.customCSS)return e.customCSS;let{styles:n}=e;return"\n    .preview-content {\n      background-color: ".concat(n.background,";\n      color: ").concat(n.text,";\n      padding: 1rem;\n    }\n\n    .preview-content h1 {\n      color: ").concat(n.h1.color,";\n      font-size: ").concat(n.h1.fontSize,";\n      font-weight: ").concat(n.h1.fontWeight,";\n      line-height: ").concat(n.h1.lineHeight,";\n      margin-top: ").concat(n.h1.marginTop,";\n      margin-bottom: ").concat(n.h1.marginBottom,";\n      ").concat(n.h1.borderBottom?"border-bottom: ".concat(n.h1.borderBottom,";"):"","\n      ").concat(n.h1.paddingBottom?"padding-bottom: ".concat(n.h1.paddingBottom,";"):"","\n    }\n\n    .preview-content h2 {\n      color: ").concat(n.h2.color,";\n      font-size: ").concat(n.h2.fontSize,";\n      font-weight: ").concat(n.h2.fontWeight,";\n      line-height: ").concat(n.h2.lineHeight,";\n      margin-top: ").concat(n.h2.marginTop,";\n      margin-bottom: ").concat(n.h2.marginBottom,";\n      ").concat(n.h2.borderBottom?"border-bottom: ".concat(n.h2.borderBottom,";"):"","\n      ").concat(n.h2.paddingBottom?"padding-bottom: ".concat(n.h2.paddingBottom,";"):"","\n    }\n\n    .preview-content h3 {\n      color: ").concat(n.h3.color,";\n      font-size: ").concat(n.h3.fontSize,";\n      font-weight: ").concat(n.h3.fontWeight,";\n      line-height: ").concat(n.h3.lineHeight,";\n      margin-top: ").concat(n.h3.marginTop,";\n      margin-bottom: ").concat(n.h3.marginBottom,";\n    }\n\n    .preview-content h4 {\n      color: ").concat(n.h4.color,";\n      font-size: ").concat(n.h4.fontSize,";\n      font-weight: ").concat(n.h4.fontWeight,";\n      line-height: ").concat(n.h4.lineHeight,";\n      margin-top: ").concat(n.h4.marginTop,";\n      margin-bottom: ").concat(n.h4.marginBottom,";\n    }\n\n    .preview-content h5 {\n      color: ").concat(n.h5.color,";\n      font-size: ").concat(n.h5.fontSize,";\n      font-weight: ").concat(n.h5.fontWeight,";\n      line-height: ").concat(n.h5.lineHeight,";\n      margin-top: ").concat(n.h5.marginTop,";\n      margin-bottom: ").concat(n.h5.marginBottom,";\n    }\n\n    .preview-content h6 {\n      color: ").concat(n.h6.color,";\n      font-size: ").concat(n.h6.fontSize,";\n      font-weight: ").concat(n.h6.fontWeight,";\n      line-height: ").concat(n.h6.lineHeight,";\n      margin-top: ").concat(n.h6.marginTop,";\n      margin-bottom: ").concat(n.h6.marginBottom,";\n    }\n\n    .preview-content p {\n      color: ").concat(n.paragraph.color,";\n      font-size: ").concat(n.paragraph.fontSize,";\n      line-height: ").concat(n.paragraph.lineHeight,";\n      margin-bottom: ").concat(n.paragraph.marginBottom,";\n    }\n\n    .preview-content a {\n      color: ").concat(n.link.color,";\n      text-decoration: ").concat(n.link.textDecoration,";\n    }\n\n    .preview-content a:hover {\n      text-decoration: underline;\n    }\n\n    .preview-content blockquote {\n      background: ").concat(n.blockquote.background,";\n      border-left: ").concat(n.blockquote.borderLeft,";\n      color: ").concat(n.blockquote.color,";\n      padding: ").concat(n.blockquote.padding,";\n      margin: ").concat(n.blockquote.margin,";\n      font-style: ").concat(n.blockquote.fontStyle,";\n    }\n\n    .preview-content code {\n      background: ").concat(n.code.background,";\n      color: ").concat(n.code.color,";\n      padding: ").concat(n.code.padding,";\n      border-radius: ").concat(n.code.borderRadius,";\n      font-family: ").concat(n.code.fontFamily,";\n      font-size: ").concat(n.code.fontSize,";\n      white-space: pre-wrap;\n      word-wrap: break-word;\n      word-break: break-all;\n    }\n\n    .preview-content code.code-inline {\n      display: inline;\n    }\n\n    .preview-content code.code-inline .pln,\n    .preview-content code.code-inline .pun {\n      display: inline;\n    }\n\n    .preview-content pre {\n      background: ").concat(n.codeBlock.background,";\n      color: ").concat(n.codeBlock.color,";\n      padding: ").concat(n.codeBlock.padding,";\n      border-radius: ").concat(n.codeBlock.borderRadius,";\n      font-family: ").concat(n.codeBlock.fontFamily,";\n      font-size: ").concat(n.codeBlock.fontSize,";\n      line-height: ").concat(n.codeBlock.lineHeight,";\n      overflow: ").concat(n.codeBlock.overflow,";\n      white-space: pre-wrap;\n      word-wrap: break-word;\n    }\n\n    .preview-content pre code {\n      background: transparent;\n      color: inherit;\n      padding: 0;\n      border-radius: 0;\n    }\n\n    .preview-content ul,\n    .preview-content ol {\n      color: ").concat(n.list.color,";\n      margin-left: ").concat(n.list.marginLeft,";\n      margin-bottom: ").concat(n.list.marginBottom,";\n      line-height: ").concat(n.list.lineHeight,";\n    }\n\n    .preview-content table {\n      border-collapse: collapse;\n      width: 100%;\n      margin: 1em 0;\n    }\n\n    .preview-content th,\n    .preview-content td {\n      border: 1px solid ").concat(n.table.borderColor,";\n      padding: ").concat(n.table.cellPadding,";\n      text-align: left;\n    }\n\n    .preview-content th {\n      background: ").concat(n.table.headerBackground,";\n      color: ").concat(n.table.headerColor,";\n      font-weight: 600;\n    }\n\n    .preview-content tr:nth-child(even) {\n      background: ").concat(n.table.evenRowBackground||"transparent",";\n    }\n\n    .preview-content img {\n      max-width: ").concat(n.image.maxWidth,";\n      border-radius: ").concat(n.image.borderRadius,";\n      margin: ").concat(n.image.margin,";\n    }\n\n    .preview-content hr {\n      border: none;\n      border-top: ").concat(n.hr.border,";\n      margin: ").concat(n.hr.margin,";\n    }\n  ")}(e);return(0,o.jsx)("style",{dangerouslySetInnerHTML:{__html:n}})}var q=t(4011),F=t(6474),L=t(7863),W=t(5196);let _=q.bL;q.YJ;let E=q.WT,M=r.forwardRef((e,n)=>{let{className:t,children:r,...a}=e;return(0,o.jsxs)(q.l9,{ref:n,className:(0,i.cn)("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...a,children:[r,(0,o.jsx)(q.In,{asChild:!0,children:(0,o.jsx)(F.A,{className:"h-4 w-4 opacity-50"})})]})});M.displayName=q.l9.displayName;let O=r.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,o.jsx)(q.PP,{ref:n,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,o.jsx)(L.A,{className:"h-4 w-4"})})});O.displayName=q.PP.displayName;let $=r.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,o.jsx)(q.wn,{ref:n,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,o.jsx)(F.A,{className:"h-4 w-4"})})});$.displayName=q.wn.displayName;let U=r.forwardRef((e,n)=>{let{className:t,children:r,position:a="popper",...c}=e;return(0,o.jsx)(q.ZL,{children:(0,o.jsxs)(q.UC,{ref:n,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...c,children:[(0,o.jsx)(O,{}),(0,o.jsx)(q.LM,{className:(0,i.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,o.jsx)($,{})]})})});U.displayName=q.UC.displayName,r.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,o.jsx)(q.JU,{ref:n,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",t),...r})}).displayName=q.JU.displayName;let Z=r.forwardRef((e,n)=>{let{className:t,children:r,...a}=e;return(0,o.jsxs)(q.q7,{ref:n,className:(0,i.cn)("relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[(0,o.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(q.VF,{children:(0,o.jsx)(W.A,{className:"h-4 w-4"})})}),(0,o.jsx)(q.p4,{children:r})]})});Z.displayName=q.q7.displayName,r.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,o.jsx)(q.wv,{ref:n,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=q.wv.displayName;var J=t(2525);function V(){let{activeTheme:e,themes:n,setActiveTheme:t,deleteCustomTheme:r}=(0,D.D)(),a=(e,n)=>{e.stopPropagation(),confirm("确定要删除这个主题吗？")&&r(n)};return(0,o.jsxs)(_,{value:e.id,onValueChange:t,children:[(0,o.jsx)(M,{className:"w-[180px]",children:(0,o.jsx)(E,{placeholder:"选择主题"})}),(0,o.jsx)(U,{children:n.map(e=>(0,o.jsx)(Z,{value:e.id,className:"cursor-pointer",children:(0,o.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,o.jsx)("div",{className:"w-4 h-4 rounded border shrink-0",style:{backgroundColor:e.styles.background,borderColor:e.styles.text}}),(0,o.jsx)("span",{className:"flex-1",children:e.name}),!e.isBuiltIn&&(0,o.jsx)(R,{variant:"ghost",size:"icon",className:"h-5 w-5 shrink-0 hover:bg-destructive hover:text-destructive-foreground",onClick:n=>a(n,e.id),children:(0,o.jsx)(J.A,{className:"h-3 w-3"})})]})},e.id))})]})}var K=t(5821),G=t(4416);let X=K.bL,Q=K.l9,ee=K.ZL;K.bm;let en=r.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,o.jsx)(K.hJ,{ref:n,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});en.displayName=K.hJ.displayName;let et=r.forwardRef((e,n)=>{let{className:t,children:r,...a}=e;return(0,o.jsxs)(ee,{children:[(0,o.jsx)(en,{}),(0,o.jsxs)(K.UC,{ref:n,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a,children:[r,(0,o.jsxs)(K.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,o.jsx)(G.A,{className:"h-4 w-4"}),(0,o.jsx)("span",{className:"sr-only",children:"关闭"})]})]})]})});et.displayName=K.UC.displayName;let eo=e=>{let{className:n,...t}=e;return(0,o.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",n),...t})};eo.displayName="DialogHeader";let er=e=>{let{className:n,...t}=e;return(0,o.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...t})};er.displayName="DialogFooter";let ea=r.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,o.jsx)(K.hE,{ref:n,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});ea.displayName=K.hE.displayName,r.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,o.jsx)(K.VY,{ref:n,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})}).displayName=K.VY.displayName;let ei=r.forwardRef((e,n)=>{let{className:t,type:r,...a}=e;return(0,o.jsx)("input",{type:r,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...a})});ei.displayName="Input";var ec=t(2797);let el=(0,S.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),es=r.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,o.jsx)(ec.b,{ref:n,className:(0,i.cn)(el(),t),...r})});es.displayName=ec.b.displayName;let ed=r.forwardRef((e,n)=>{let{className:t,...r}=e;return(0,o.jsx)("textarea",{className:(0,i.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r})});ed.displayName="Textarea";var em=t(4616),eh=t(9917),eu=t(2657),ep=t(1284),ef=t(6671);let eg=[{selector:".preview-content",desc:"预览容器",example:"background-color: #fff; color: #333; padding: 1rem;"},{selector:".preview-content h1",desc:"一级标题",example:"color: #1a1a1a; font-size: 2em; font-weight: 600; border-bottom: 1px solid #eee;"},{selector:".preview-content h2",desc:"二级标题",example:"color: #1a1a1a; font-size: 1.5em; font-weight: 600;"},{selector:".preview-content h3",desc:"三级标题",example:"color: #1a1a1a; font-size: 1.25em; font-weight: 600;"},{selector:".preview-content h4",desc:"四级标题",example:"color: #1a1a1a; font-size: 1.1em; font-weight: 600;"},{selector:".preview-content h5",desc:"五级标题",example:"color: #1a1a1a; font-size: 1em; font-weight: 600;"},{selector:".preview-content h6",desc:"六级标题",example:"color: #666; font-size: 0.9em; font-weight: 600;"},{selector:".preview-content p",desc:"段落",example:"color: #333; font-size: 16px; line-height: 1.8; margin-bottom: 1em;"},{selector:".preview-content a",desc:"链接",example:"color: #0066cc; text-decoration: none;"},{selector:".preview-content a:hover",desc:"链接悬停",example:"text-decoration: underline;"},{selector:".preview-content strong",desc:"粗体",example:"font-weight: 700;"},{selector:".preview-content em",desc:"斜体",example:"font-style: italic;"},{selector:".preview-content blockquote",desc:"引用块",example:"background: #f9f9f9; border-left: 4px solid #ddd; padding: 1em; margin: 1em 0;"},{selector:".preview-content code",desc:"行内代码",example:"background: #f4f4f4; color: #c7254e; padding: 2px 6px; border-radius: 3px;"},{selector:".preview-content pre",desc:"代码块",example:"background: #2d2d2d; color: #ccc; padding: 1em; border-radius: 6px; overflow: auto;"},{selector:".preview-content pre code",desc:"代码块内代码",example:"background: transparent; color: inherit; padding: 0;"},{selector:".preview-content ul",desc:"无序列表",example:"margin-left: 1.5em; margin-bottom: 1em; line-height: 1.8;"},{selector:".preview-content ol",desc:"有序列表",example:"margin-left: 1.5em; margin-bottom: 1em; line-height: 1.8;"},{selector:".preview-content li",desc:"列表项",example:"margin-bottom: 0.25em;"},{selector:".preview-content table",desc:"表格",example:"border-collapse: collapse; width: 100%; margin: 1em 0;"},{selector:".preview-content th",desc:"表头单元格",example:"background: #f4f4f4; border: 1px solid #ddd; padding: 8px 12px; font-weight: 600;"},{selector:".preview-content td",desc:"表格单元格",example:"border: 1px solid #ddd; padding: 8px 12px;"},{selector:".preview-content tr:nth-child(even)",desc:"偶数行",example:"background: #fafafa;"},{selector:".preview-content img",desc:"图片",example:"max-width: 100%; border-radius: 4px; margin: 1em 0;"},{selector:".preview-content hr",desc:"分割线",example:"border: none; border-top: 1px solid #eee; margin: 2em 0;"}],ex="/* 预览容器 */\n.preview-content {\n  background-color: #ffffff;\n  color: #1a1a1a;\n  padding: 1rem;\n}\n\n/* 一级标题 */\n.preview-content h1 {\n  color: #1a1a1a;\n  font-size: 2em;\n  font-weight: 600;\n  line-height: 1.3;\n  margin-top: 1.5em;\n  margin-bottom: 0.5em;\n  border-bottom: 1px solid #e5e5e5;\n  padding-bottom: 0.3em;\n}\n\n/* 二级标题 */\n.preview-content h2 {\n  color: #1a1a1a;\n  font-size: 1.5em;\n  font-weight: 600;\n  line-height: 1.3;\n  margin-top: 1.5em;\n  margin-bottom: 0.5em;\n  border-bottom: 1px solid #e5e5e5;\n  padding-bottom: 0.3em;\n}\n\n/* 三级标题 */\n.preview-content h3 {\n  color: #1a1a1a;\n  font-size: 1.25em;\n  font-weight: 600;\n  line-height: 1.3;\n  margin-top: 1.5em;\n  margin-bottom: 0.5em;\n}\n\n/* 四级标题 */\n.preview-content h4 {\n  color: #1a1a1a;\n  font-size: 1.1em;\n  font-weight: 600;\n  line-height: 1.3;\n  margin-top: 1.5em;\n  margin-bottom: 0.5em;\n}\n\n/* 五级标题 */\n.preview-content h5 {\n  color: #1a1a1a;\n  font-size: 1em;\n  font-weight: 600;\n  line-height: 1.3;\n  margin-top: 1.5em;\n  margin-bottom: 0.5em;\n}\n\n/* 六级标题 */\n.preview-content h6 {\n  color: #666666;\n  font-size: 0.9em;\n  font-weight: 600;\n  line-height: 1.3;\n  margin-top: 1.5em;\n  margin-bottom: 0.5em;\n}\n\n/* 段落 */\n.preview-content p {\n  color: #1a1a1a;\n  font-size: 16px;\n  line-height: 1.8;\n  margin-bottom: 1em;\n}\n\n/* 链接 */\n.preview-content a {\n  color: #0066cc;\n  text-decoration: none;\n}\n\n.preview-content a:hover {\n  text-decoration: underline;\n}\n\n/* 引用块 */\n.preview-content blockquote {\n  background: #f9f9f9;\n  border-left: 4px solid #ddd;\n  color: #666666;\n  padding: 1em;\n  margin: 1em 0;\n  font-style: italic;\n}\n\n/* 行内代码 */\n.preview-content code {\n  background: #f4f4f4;\n  color: #c7254e;\n  padding: 2px 6px;\n  border-radius: 3px;\n  font-family: Consolas, Monaco, monospace;\n  font-size: 0.9em;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  word-break: break-all;\n}\n\n.preview-content code.code-inline {\n  display: inline;\n}\n\n.preview-content code.code-inline .pln,\n.preview-content code.code-inline .pun {\n  display: inline;\n}\n\n/* 代码块 */\n.preview-content pre {\n  background: #f4f4f4;\n  color: #333333;\n  padding: 1em;\n  border-radius: 6px;\n  font-family: Consolas, Monaco, monospace;\n  font-size: 0.9em;\n  line-height: 1.5;\n  overflow: auto;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n\n.preview-content pre code {\n  background: transparent;\n  color: inherit;\n  padding: 0;\n  border-radius: 0;\n}\n\n/* 列表 */\n.preview-content ul,\n.preview-content ol {\n  color: #1a1a1a;\n  margin-left: 1.5em;\n  margin-bottom: 1em;\n  line-height: 1.8;\n}\n\n/* 表格 */\n.preview-content table {\n  border-collapse: collapse;\n  width: 100%;\n  margin: 1em 0;\n}\n\n.preview-content th,\n.preview-content td {\n  border: 1px solid #ddd;\n  padding: 8px 12px;\n  text-align: left;\n}\n\n.preview-content th {\n  background: #f4f4f4;\n  color: #1a1a1a;\n  font-weight: 600;\n}\n\n.preview-content tr:nth-child(even) {\n  background: #fafafa;\n}\n\n/* 图片 */\n.preview-content img {\n  max-width: 100%;\n  border-radius: 4px;\n  margin: 1em 0;\n}\n\n/* 分割线 */\n.preview-content hr {\n  border: none;\n  border-top: 1px solid #e5e5e5;\n  margin: 2em 0;\n}\n";function eb(){let[e,n]=(0,r.useState)(!1),[t,a]=(0,r.useState)(!1),[i,m]=(0,r.useState)(null),[h,u]=(0,r.useState)(""),[p,f]=(0,r.useState)(ex),[g,x]=(0,r.useState)(null),{saveCustomTheme:b,activeTheme:w,customThemes:v}=(0,D.D)(),j=e=>{a(!0),m(e.id),u(e.name),f(e.customCSS||ex),n(!0)},y=e=>{navigator.clipboard.writeText(e),x(e),setTimeout(()=>x(null),2e3)},k=(e,n)=>{let t="\n".concat(e," {\n  ").concat(n.split("; ").join(";\n  "),"\n}\n");f(e=>e+t),ef.oR.success("已添加 ".concat(e," 样式"))},C=v.filter(e=>!e.isBuiltIn);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(R,{variant:"outline",size:"sm",className:"gap-1 cursor-pointer",onClick:()=>{a(!1),m(null),u(""),f(ex),n(!0)},children:[(0,o.jsx)(em.A,{className:"h-4 w-4"}),"新建主题"]}),C.length>0&&(0,o.jsxs)(X,{children:[(0,o.jsx)(Q,{asChild:!0,children:(0,o.jsxs)(R,{variant:"outline",size:"sm",className:"gap-1 cursor-pointer",children:[(0,o.jsx)(eh.A,{className:"h-4 w-4"}),"编辑主题"]})}),(0,o.jsxs)(et,{className:"max-w-md",children:[(0,o.jsx)(eo,{children:(0,o.jsx)(ea,{children:"选择要编辑的主题"})}),(0,o.jsx)("div",{className:"space-y-2 max-h-[300px] overflow-auto",children:C.map(e=>(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent/50 transition-colors cursor-pointer",onClick:()=>j(e),children:[(0,o.jsx)("span",{className:"font-medium",children:e.name}),(0,o.jsx)(eh.A,{className:"h-4 w-4 text-muted-foreground"})]},e.id))})]})]}),(0,o.jsx)(X,{open:e,onOpenChange:n,children:(0,o.jsxs)(et,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,o.jsx)(eo,{children:(0,o.jsx)(ea,{children:t?"编辑主题":"创建自定义主题"})}),(0,o.jsxs)(c,{defaultValue:"editor",className:"flex-1 flex flex-col min-h-0",children:[(0,o.jsxs)(l,{className:"grid w-full grid-cols-3",children:[(0,o.jsx)(s,{value:"editor",children:"CSS 编辑器"}),(0,o.jsxs)(s,{value:"preview",className:"gap-1",children:[(0,o.jsx)(eu.A,{className:"h-3 w-3"}),"实时预览"]}),(0,o.jsx)(s,{value:"reference",children:"样式参考"})]}),(0,o.jsx)(d,{value:"editor",className:"flex-1 flex flex-col min-h-0 mt-4",children:(0,o.jsxs)("div",{className:"space-y-3 flex-1 flex flex-col min-h-0",children:[(0,o.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)(es,{htmlFor:"themeName",children:"主题名称"}),(0,o.jsx)(ei,{id:"themeName",value:h,onChange:e=>u(e.target.value),placeholder:"输入主题名称",className:"mt-1"})]}),(0,o.jsx)(R,{variant:"outline",size:"sm",onClick:()=>{f(ex),ef.oR.success("已重置为默认样式")},children:"重置默认"})]}),(0,o.jsxs)("div",{className:"flex-1 min-h-0",children:[(0,o.jsx)(es,{children:"自定义 CSS"}),(0,o.jsx)(ed,{value:p,onChange:e=>f(e.target.value),className:"mt-1 h-[400px] font-mono text-sm resize-none",placeholder:"输入自定义 CSS..."})]}),(0,o.jsxs)("p",{className:"text-xs text-muted-foreground",children:["\uD83D\uDCA1 提示：所有样式都需要以 ",(0,o.jsx)("code",{className:"bg-muted px-1 rounded",children:".preview-content"})," 开头。 切换到「实时预览」标签查看效果，或到「样式参考」标签查看所有可用的选择器。"]})]})}),(0,o.jsxs)(d,{value:"preview",className:"flex-1 flex flex-col min-h-0 mt-4",children:[(0,o.jsxs)("div",{className:"flex-1 border rounded-lg overflow-auto",children:[(0,o.jsx)("style",{dangerouslySetInnerHTML:{__html:p}}),(0,o.jsx)("div",{className:"preview-content p-6",dangerouslySetInnerHTML:{__html:'\n<h1>一级标题</h1>\n<h2>二级标题</h2>\n<h3>三级标题</h3>\n<p>这是一段普通的<strong>段落文字</strong>，包含<em>斜体</em>和<a href="#">链接</a>样式。</p>\n<blockquote>\n<p>这是一段引用文字，通常用于引用他人的话或重要内容。</p>\n</blockquote>\n<p>行内代码示例：<code>const hello = "world";</code></p>\n<pre><code>// 代码块示例\nfunction greet(name) {\n  return `Hello, ${name}!`;\n}\nconsole.log(greet("World"));</code></pre>\n<h3>列表示例</h3>\n<ul>\n<li>无序列表项 1</li>\n<li>无序列表项 2</li>\n<li>无序列表项 3</li>\n</ul>\n<ol>\n<li>有序列表项 1</li>\n<li>有序列表项 2</li>\n<li>有序列表项 3</li>\n</ol>\n<h3>表格示例</h3>\n<table>\n<thead>\n<tr><th>功能</th><th>状态</th><th>说明</th></tr>\n</thead>\n<tbody>\n<tr><td>Markdown 解析</td><td>✅ 完成</td><td>支持 GFM</td></tr>\n<tr><td>主题切换</td><td>✅ 完成</td><td>6 种内置主题</td></tr>\n<tr><td>自定义主题</td><td>✅ 完成</td><td>CSS 编辑器</td></tr>\n</tbody>\n</table>\n<hr>\n<p>分割线上方和下方的内容。</p>\n'}})]}),(0,o.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"\uD83D\uDCA1 提示：修改 CSS 后切换到此标签页查看实时效果"})]}),(0,o.jsx)(d,{value:"reference",className:"flex-1 overflow-auto mt-4",children:(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"以下是所有可用的 CSS 选择器，点击可复制或插入示例样式："}),(0,o.jsx)(B.TooltipProvider,{children:(0,o.jsx)("div",{className:"grid gap-2",children:eg.map(e=>(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent/50 transition-colors",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("code",{className:"text-sm font-mono bg-muted px-2 py-1 rounded",children:e.selector}),(0,o.jsx)("span",{className:"text-sm text-muted-foreground ml-3",children:e.desc})]}),(0,o.jsxs)("div",{className:"flex gap-1",children:[(0,o.jsxs)(B.m_,{children:[(0,o.jsx)(B.k$,{asChild:!0,children:(0,o.jsx)(R,{variant:"ghost",size:"icon",className:"h-8 w-8 cursor-pointer",onClick:()=>y(e.selector),children:g===e.selector?(0,o.jsx)(W.A,{className:"h-4 w-4 text-green-500"}):(0,o.jsx)(N.A,{className:"h-4 w-4"})})}),(0,o.jsx)(B.ZI,{children:"复制选择器"})]}),(0,o.jsxs)(B.m_,{children:[(0,o.jsx)(B.k$,{asChild:!0,children:(0,o.jsx)(R,{variant:"ghost",size:"icon",className:"h-8 w-8 cursor-pointer",onClick:()=>k(e.selector,e.example),children:(0,o.jsx)(em.A,{className:"h-4 w-4"})})}),(0,o.jsx)(B.ZI,{children:"插入示例样式"})]}),(0,o.jsxs)(B.m_,{children:[(0,o.jsx)(B.k$,{asChild:!0,children:(0,o.jsx)(R,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,o.jsx)(ep.A,{className:"h-4 w-4"})})}),(0,o.jsx)(B.ZI,{className:"max-w-xs",children:(0,o.jsx)("p",{className:"font-mono text-xs",children:e.example})})]})]})]},e.selector))})})]})})]}),(0,o.jsxs)(er,{className:"mt-4",children:[(0,o.jsx)(R,{variant:"outline",onClick:()=>n(!1),children:"取消"}),(0,o.jsx)(R,{onClick:()=>{if(!h.trim())return void ef.oR.error("请输入主题名称");let e=function(e,n,t){try{let o=t||"custom-".concat(Date.now()),r=n.match(/\.preview-content\s*\{[^}]*background(?:-color)?:\s*([^;]+)/),a=n.match(RegExp("\\.preview-content\\s*\\{[^}]*(?<!background-)color:\\s*([^;]+)")),i=r?r[1].trim():"#ffffff",c=a?a[1].trim():"#1a1a1a";return{id:o,name:e,description:"自定义 CSS 主题",isBuiltIn:!1,customCSS:n,styles:{background:i,text:c,textSecondary:"#666666",h1:ew(c,"2em"),h2:ew(c,"1.5em"),h3:ew(c,"1.25em"),h4:ew(c,"1.1em"),h5:ew(c,"1em"),h6:ew("#666666","0.9em"),paragraph:{color:c,fontSize:"16px",lineHeight:"1.8",marginBottom:"1em"},link:{color:"#0066cc",textDecoration:"none"},blockquote:{background:"#f9f9f9",borderLeft:"4px solid #ddd",color:"#666666",padding:"1em",margin:"1em 0",fontStyle:"italic"},code:{background:"#f4f4f4",color:"#c7254e",padding:"2px 6px",borderRadius:"3px",fontFamily:"Consolas, Monaco, monospace",fontSize:"0.9em"},codeBlock:{background:"#f4f4f4",color:"#333333",padding:"1em",borderRadius:"6px",fontFamily:"Consolas, Monaco, monospace",fontSize:"0.9em",lineHeight:"1.5",overflow:"auto"},list:{color:c,marginLeft:"1.5em",marginBottom:"1em",lineHeight:"1.8"},table:{borderColor:"#ddd",headerBackground:"#f4f4f4",headerColor:c,cellPadding:"8px 12px",evenRowBackground:"#fafafa"},image:{maxWidth:"100%",borderRadius:"4px",margin:"1em 0"},hr:{border:"1px solid #e5e5e5",margin:"2em 0"}}}}catch(e){return console.error("CSS 解析错误:",e),null}}(h,p,t&&i?i:void 0);e?(b(e),ef.oR.success(t?'主题 "'.concat(h,'" 已更新'):'主题 "'.concat(h,'" 已保存')),n(!1),u(""),f(ex),a(!1),m(null)):ef.oR.error("CSS 解析失败，请检查格式")},children:t?"更新主题":"保存主题"})]})]})})]})}function ew(e,n){return{color:e,fontSize:n,fontWeight:"600",lineHeight:"1.3",marginTop:"1.5em",marginBottom:"0.5em"}}var ev=t(6096);let ej=/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,ey=ev.Ikc({color:ev.YjP().regex(ej,"无效的颜色格式"),fontSize:ev.YjP().min(1),fontWeight:ev.YjP().min(1),lineHeight:ev.YjP().min(1),marginTop:ev.YjP().min(1),marginBottom:ev.YjP().min(1),borderBottom:ev.YjP().optional(),paddingBottom:ev.YjP().optional()}),ek=ev.Ikc({color:ev.YjP().regex(ej,"无效的颜色格式"),fontSize:ev.YjP().min(1),lineHeight:ev.YjP().min(1),marginBottom:ev.YjP().min(1)}),eN=ev.Ikc({color:ev.YjP().regex(ej,"无效的颜色格式"),textDecoration:ev.YjP().min(1)}),eC=ev.Ikc({background:ev.YjP().min(1),borderLeft:ev.YjP().min(1),color:ev.YjP().regex(ej,"无效的颜色格式"),padding:ev.YjP().min(1),margin:ev.YjP().min(1),fontStyle:ev.YjP().min(1)}),eS=ev.Ikc({background:ev.YjP().min(1),color:ev.YjP().min(1),padding:ev.YjP().min(1),borderRadius:ev.YjP().min(1),fontFamily:ev.YjP().min(1),fontSize:ev.YjP().min(1)}),ez=ev.Ikc({background:ev.YjP().min(1),color:ev.YjP().min(1),padding:ev.YjP().min(1),borderRadius:ev.YjP().min(1),fontFamily:ev.YjP().min(1),fontSize:ev.YjP().min(1),lineHeight:ev.YjP().min(1),overflow:ev.YjP().min(1)}),eR=ev.Ikc({color:ev.YjP().regex(ej,"无效的颜色格式"),marginLeft:ev.YjP().min(1),marginBottom:ev.YjP().min(1),lineHeight:ev.YjP().min(1)}),eB=ev.Ikc({borderColor:ev.YjP().min(1),headerBackground:ev.YjP().min(1),headerColor:ev.YjP().min(1),cellPadding:ev.YjP().min(1),evenRowBackground:ev.YjP().optional()}),eP=ev.Ikc({maxWidth:ev.YjP().min(1),borderRadius:ev.YjP().min(1),margin:ev.YjP().min(1)}),eA=ev.Ikc({border:ev.YjP().min(1),margin:ev.YjP().min(1)}),eY=ev.Ikc({background:ev.YjP().regex(ej,"无效的背景色格式"),text:ev.YjP().regex(ej,"无效的文字颜色格式"),textSecondary:ev.YjP().min(1),h1:ey,h2:ey,h3:ey,h4:ey,h5:ey,h6:ey,paragraph:ek,link:eN,blockquote:eC,code:eS,codeBlock:ez,list:eR,table:eB,image:eP,hr:eA}),eH=ev.Ikc({id:ev.YjP().min(1,"主题 ID 不能为空"),name:ev.YjP().min(1,"主题名称不能为空"),description:ev.YjP(),isBuiltIn:ev.zMY(),styles:eY});var eT=t(1788),eD=t(9869),eI=t(4395),eq=t(9157);let eF=[{id:"wechat-green",name:"微信绿",desc:"微信公众号风格"},{id:"github-style",name:"GitHub 风格",desc:"经典 README 风格"},{id:"notion-style",name:"Notion 风格",desc:"简洁优雅"},{id:"juejin-style",name:"掘金风格",desc:"技术社区风格"},{id:"zhihu-style",name:"知乎风格",desc:"问答社区风格"}];function eL(){let{activeTheme:e,exportTheme:n,importTheme:t}=(0,D.D)(),a=(0,r.useRef)(null),[i,c]=(0,r.useState)(!1),l=async e=>{try{let n=await fetch("/themes/".concat(e,".json"));if(!n.ok)throw Error("加载失败");let o=await n.text(),r=t(o);r?(ef.oR.success('主题 "'.concat(r.name,'" 已导入')),c(!1)):ef.oR.error("导入失败")}catch(e){ef.oR.error("无法加载预设主题")}},s=async e=>{var n;let o=null==(n=e.target.files)?void 0:n[0];if(o){try{let e=await o.text(),n=JSON.parse(e),r=function e(n){let t={};for(let[o,r]of Object.entries(n))o.startsWith("_")||(r&&"object"==typeof r&&!Array.isArray(r)?t[o]=e(r):t[o]=r);return t}(n),a=function(e){let n=eH.safeParse(e);return n.success?{valid:!0,errors:[]}:{valid:!1,errors:n.error.issues.map(e=>{let n=e.path.join(".");return"".concat(n,": ").concat(e.message)})}}(r);if(!a.valid)return void ef.oR.error("无效的主题格式: ".concat(a.errors[0]));let i=t(JSON.stringify(r));i?ef.oR.success('主题 "'.concat(i.name,'" 已导入')):ef.oR.error("导入失败")}catch(e){ef.oR.error("无法解析主题文件")}e.target.value=""}};return(0,o.jsxs)("div",{className:"flex gap-1",children:[(0,o.jsx)(R,{variant:"ghost",size:"icon",className:"h-8 w-8 cursor-pointer",onClick:()=>{let t=n(e.id);if(!t)return void ef.oR.error("导出失败");let o=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(o),a=document.createElement("a");a.href=r,a.download="theme-".concat(e.id,".json"),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r),ef.oR.success("主题已导出")},title:"导出主题",children:(0,o.jsx)(eT.A,{className:"h-4 w-4"})}),(0,o.jsx)(R,{variant:"ghost",size:"icon",className:"h-8 w-8 cursor-pointer",onClick:()=>{var e;null==(e=a.current)||e.click()},title:"导入主题",children:(0,o.jsx)(eD.A,{className:"h-4 w-4"})}),(0,o.jsxs)(X,{open:i,onOpenChange:c,children:[(0,o.jsx)(Q,{asChild:!0,children:(0,o.jsx)(R,{variant:"ghost",size:"icon",className:"h-8 w-8 cursor-pointer",title:"主题模板库",children:(0,o.jsx)(eI.A,{className:"h-4 w-4"})})}),(0,o.jsxs)(et,{className:"max-w-md",children:[(0,o.jsx)(eo,{children:(0,o.jsx)(ea,{children:"主题模板库"})}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("div",{className:"border rounded-lg p-3",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-medium",children:"空白模板"}),(0,o.jsx)("p",{className:"text-sm text-muted-foreground",children:"下载完整的主题 JSON 模板，包含所有可配置项"})]}),(0,o.jsxs)(R,{variant:"outline",size:"sm",className:"cursor-pointer",onClick:()=>{window.open("/theme-template.json","_blank"),ef.oR.success("模板已打开，右键保存即可")},children:[(0,o.jsx)(eq.A,{className:"h-4 w-4 mr-1"}),"下载"]})]})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h4",{className:"font-medium mb-2",children:"预设主题"}),(0,o.jsx)("div",{className:"space-y-2",children:eF.map(e=>(0,o.jsxs)("div",{className:"flex items-center justify-between border rounded-lg p-3 hover:bg-accent/50 transition-colors",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"font-medium",children:e.name}),(0,o.jsx)("span",{className:"text-sm text-muted-foreground ml-2",children:e.desc})]}),(0,o.jsx)(R,{variant:"ghost",size:"sm",className:"cursor-pointer",onClick:()=>l(e.id),children:"导入"})]},e.id))})]}),(0,o.jsx)("div",{className:"text-xs text-muted-foreground border-t pt-3",children:(0,o.jsxs)("p",{children:["\uD83D\uDCA1 提示：模板包含详细的字段说明，导入时会自动移除说明字段。 也可以查看 ",(0,o.jsx)("code",{className:"bg-muted px-1 rounded",children:"/theme-schema.json"})," 了解完整的字段定义。"]})})]})]})]}),(0,o.jsx)("input",{ref:a,type:"file",accept:".json",className:"hidden",onChange:s})]})}var eW=t(8947);function e_(e){return Object.entries(e).filter(e=>{let[,n]=e;return void 0!==n}).map(e=>{let[n,t]=e,o=n.replace(/([A-Z])/g,"-$1").toLowerCase();return"".concat(o,": ").concat(t)}).join("; ")}async function eE(e){try{var n;let t=new Blob([e],{type:"text/html"}),o=new ClipboardItem({"text/html":t,"text/plain":new Blob([(n=e,new DOMParser().parseFromString(n,"text/html").body.textContent||"")],{type:"text/plain"})});return await navigator.clipboard.write([o]),!0}catch(n){console.error("复制 HTML 失败:",n);try{var t=e;let n=document.createElement("div");n.innerHTML=t,n.style.position="fixed",n.style.left="-9999px",n.style.top="-9999px",document.body.appendChild(n);let o=document.createRange();o.selectNodeContents(n);let r=window.getSelection();if(!r)return document.body.removeChild(n),!1;r.removeAllRanges(),r.addRange(o);let a=document.execCommand("copy");return r.removeAllRanges(),document.body.removeChild(n),a}catch(e){return console.error("降级复制也失败:",e),!1}}}eW.xI.setOptions({gfm:!0,breaks:!0,async:!1});var eM=t(7855),eO=t(4738),e$=t(6767);let eU="markdown-editor-scroll-sync";function eZ(){let[e,n]=(0,r.useState)(""),[t,a]=(0,r.useState)("editor"),[i,h]=(0,r.useState)("desktop"),[u,p]=(0,r.useState)(!0),f=(0,r.useRef)(null);(0,r.useRef)(null),(0,r.useEffect)(()=>{let e=localStorage.getItem(eU);null!==e&&p("true"===e)},[]);let{editorRef:g,previewContainerRef:b,handleEditorScroll:w,handlePreviewScroll:v}=function(e){let{enabled:n}=e,t=(0,r.useRef)(null),o=(0,r.useRef)(null),a=(0,r.useRef)(null),i=(0,r.useRef)(null),c=(0,r.useCallback)(()=>{i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{a.current=null},100)},[]),l=(0,r.useCallback)(()=>{if(!n||"preview"===a.current)return;let e=t.current,r=o.current;if(!e||!r)return;a.current="editor";let i=e.scrollHeight-e.clientHeight;if(i<=0)return void c();let l=e.scrollTop/i,s=r.scrollHeight-r.clientHeight;s>0&&(r.scrollTop=l*s),c()},[n,c]),s=(0,r.useCallback)(()=>{if(!n||"editor"===a.current)return;let e=t.current,r=o.current;if(!e||!r)return;a.current="preview";let i=r.scrollHeight-r.clientHeight;if(i<=0)return void c();let l=r.scrollTop/i,s=e.scrollHeight-e.clientHeight;s>0&&(e.scrollTop=l*s),c()},[n,c]);return(0,r.useEffect)(()=>()=>{i.current&&clearTimeout(i.current)},[]),{editorRef:t,previewContainerRef:o,handleEditorScroll:l,handlePreviewScroll:s}}({enabled:u}),j=function(e,n){let[t,o]=(0,r.useState)(e);return(0,r.useEffect)(()=>{let n=setTimeout(()=>{o(e)},100);return()=>{clearTimeout(n)}},[e,100]),t}(e,100),{activeTheme:y}=(0,D.D)(),k=(0,r.useMemo)(()=>(function(e){if(!e||""===e.trim())return"";try{let n=e.replace(/^(#{1,6})([^\s#])/gm,"$1 $2"),t=eW.xI.parse(n,{async:!1});return t=t.replace(/<code>([^<]+)<\/code>/g,(e,n)=>{let t=n.split(/([,;:.\/\\|])/g).filter(e=>""!==e).map(e=>{let n=/^[,;:.\/\\|]$/.test(e);return'<span class="'.concat(n?"pun":"pln",'">').concat(e,"</span>")}).join("");return'<code class="code-inline">'.concat(t,"</code>")})}catch(n){return console.error("Markdown 解析错误:",n),function(e){let n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,e=>n[e]||e)}(e)}})(j),[j]),{textareaRef:N,handleFormat:C,handleKeyDown:S}=function(e){let{value:n,onChange:t}=e,o=(0,r.useRef)(null),a=(0,r.useCallback)((e,r)=>{let a=o.current;if(!a)return;let{selectionStart:i,selectionEnd:c}=a,{newText:l,newCursorPos:s}=function(e,n,t,o,r){let a=e.slice(0,n);return{newText:a+o+e.slice(n,t)+r+e.slice(t),newCursorPos:t+o.length+r.length}}(n,i,c,e,r);t(l),requestAnimationFrame(()=>{a.focus(),a.setSelectionRange(s,s)})},[n,t]),i=(0,r.useCallback)(e=>{let r=o.current;if(!r)return;let{selectionStart:a}=r,{newText:i,newCursorPos:c}=Y(n,a,e);t(i),requestAnimationFrame(()=>{r.focus(),r.setSelectionRange(c,c)})},[n,t]),c=(0,r.useCallback)(e=>{let r=o.current;if(!r)return;let{selectionStart:c,selectionEnd:l}=r,s=c!==l;switch(e){case"bold":a("**","**");break;case"italic":a("*","*");break;case"h1":if(s)a("# ","\n");else{let{newText:e,newCursorPos:o}=H(n,c,"# ");t(e),requestAnimationFrame(()=>{r.focus(),r.setSelectionRange(o,o)})}break;case"h2":if(s)a("## ","\n");else{let{newText:e,newCursorPos:o}=H(n,c,"## ");t(e),requestAnimationFrame(()=>{r.focus(),r.setSelectionRange(o,o)})}break;case"h3":if(s)a("### ","\n");else{let{newText:e,newCursorPos:o}=H(n,c,"### ");t(e),requestAnimationFrame(()=>{r.focus(),r.setSelectionRange(o,o)})}break;case"link":s?a("[","](url)"):i("[链接文字](url)");break;case"image":i("![图片描述](image-url)");break;case"code":a("`","`");break;case"codeblock":a("```\n","\n```");break;case"ul":if(s)a("- ","\n");else{let{newText:e,newCursorPos:o}=H(n,c,"- ");t(e),requestAnimationFrame(()=>{r.focus(),r.setSelectionRange(o,o)})}break;case"ol":if(s)a("1. ","\n");else{let{newText:e,newCursorPos:o}=H(n,c,"1. ");t(e),requestAnimationFrame(()=>{r.focus(),r.setSelectionRange(o,o)})}break;case"quote":if(s)a("> ","\n");else{let{newText:e,newCursorPos:o}=H(n,c,"> ");t(e),requestAnimationFrame(()=>{r.focus(),r.setSelectionRange(o,o)})}break;case"table":i("\n| 列1 | 列2 | 列3 |\n| --- | --- | --- |\n| 内容 | 内容 | 内容 |\n")}},[n,t,a,i]),l=(0,r.useCallback)(e=>{let r=navigator.platform.toUpperCase().indexOf("MAC")>=0?e.metaKey:e.ctrlKey;if(r&&"b"===e.key){e.preventDefault(),c("bold");return}if(r&&"i"===e.key){e.preventDefault(),c("italic");return}if(r&&"k"===e.key){e.preventDefault(),c("link");return}if(r&&e.shiftKey&&"C"===e.key){e.preventDefault(),c("code");return}if("Tab"===e.key){e.preventDefault();let r=o.current;if(!r)return;let{selectionStart:a,selectionEnd:i}=r,{newText:c,newCursorPos:l}=Y(n,a,"  ");t(c),requestAnimationFrame(()=>{r.focus(),r.setSelectionRange(a+2,i+2)})}},[c,n,t]);return{textareaRef:o,wrapSelection:a,insertAtCursor:i,handleFormat:c,handleKeyDown:l}}({value:e,onChange:n}),z=async()=>{if(!k)return void ef.oR.error("没有内容可复制");try{let e=function(e,n){let t=new DOMParser().parseFromString(e,"text/html"),o=e_({backgroundColor:n.styles.background,color:n.styles.text,padding:"1rem",fontFamily:"system-ui, -apple-system, sans-serif"}),r=Array.from(t.body.childNodes).map(e=>(function e(n,t,o){var r;if(n.nodeType===Node.TEXT_NODE)return n.textContent||"";if(n.nodeType!==Node.ELEMENT_NODE)return"";let a=n.tagName.toLowerCase();if("script"===a||"style"===a)return"";let i="tr"===a&&void 0!==o&&o%2==1,c=function(e,n,t){switch(e.toLowerCase()){case"h1":return e_({color:n.h1.color,fontSize:n.h1.fontSize,fontWeight:n.h1.fontWeight,lineHeight:n.h1.lineHeight,marginTop:n.h1.marginTop,marginBottom:n.h1.marginBottom,borderBottom:n.h1.borderBottom,paddingBottom:n.h1.paddingBottom});case"h2":return e_({color:n.h2.color,fontSize:n.h2.fontSize,fontWeight:n.h2.fontWeight,lineHeight:n.h2.lineHeight,marginTop:n.h2.marginTop,marginBottom:n.h2.marginBottom,borderBottom:n.h2.borderBottom,paddingBottom:n.h2.paddingBottom});case"h3":return e_({color:n.h3.color,fontSize:n.h3.fontSize,fontWeight:n.h3.fontWeight,lineHeight:n.h3.lineHeight,marginTop:n.h3.marginTop,marginBottom:n.h3.marginBottom});case"h4":return e_({color:n.h4.color,fontSize:n.h4.fontSize,fontWeight:n.h4.fontWeight,lineHeight:n.h4.lineHeight,marginTop:n.h4.marginTop,marginBottom:n.h4.marginBottom});case"h5":return e_({color:n.h5.color,fontSize:n.h5.fontSize,fontWeight:n.h5.fontWeight,lineHeight:n.h5.lineHeight,marginTop:n.h5.marginTop,marginBottom:n.h5.marginBottom});case"h6":return e_({color:n.h6.color,fontSize:n.h6.fontSize,fontWeight:n.h6.fontWeight,lineHeight:n.h6.lineHeight,marginTop:n.h6.marginTop,marginBottom:n.h6.marginBottom});case"p":return e_({color:n.paragraph.color,fontSize:n.paragraph.fontSize,lineHeight:n.paragraph.lineHeight,marginBottom:n.paragraph.marginBottom});case"a":return e_({color:n.link.color,textDecoration:n.link.textDecoration});case"blockquote":return e_({background:n.blockquote.background,borderLeft:n.blockquote.borderLeft,color:n.blockquote.color,padding:n.blockquote.padding,margin:n.blockquote.margin,fontStyle:n.blockquote.fontStyle});case"code":return e_({background:n.code.background,color:n.code.color,padding:n.code.padding,borderRadius:n.code.borderRadius,fontFamily:n.code.fontFamily,fontSize:n.code.fontSize});case"pre":return e_({background:n.codeBlock.background,color:n.codeBlock.color,padding:n.codeBlock.padding,borderRadius:n.codeBlock.borderRadius,fontFamily:n.codeBlock.fontFamily,fontSize:n.codeBlock.fontSize,lineHeight:n.codeBlock.lineHeight,overflow:n.codeBlock.overflow});case"ul":case"ol":return e_({color:n.list.color,marginLeft:n.list.marginLeft,marginBottom:n.list.marginBottom,lineHeight:n.list.lineHeight});case"li":return e_({color:n.list.color,lineHeight:n.list.lineHeight});case"table":return e_({borderCollapse:"collapse",width:"100%",margin:"1em 0"});case"th":return e_({border:"1px solid ".concat(n.table.borderColor),padding:n.table.cellPadding,textAlign:"left",background:n.table.headerBackground,color:n.table.headerColor,fontWeight:"600"});case"td":return e_({border:"1px solid ".concat(n.table.borderColor),padding:n.table.cellPadding,textAlign:"left",background:t?n.table.evenRowBackground:void 0});case"img":return e_({maxWidth:n.image.maxWidth,borderRadius:n.image.borderRadius,margin:n.image.margin});case"hr":return e_({border:"none",borderTop:n.hr.border,margin:n.hr.margin});case"strong":case"b":return"font-weight: bold";case"em":case"i":return"font-style: italic";default:return""}}(a,t,i);if("code"===a&&(null==(r=n.parentElement)?void 0:r.tagName.toLowerCase())!=="pre"){let e=(n.textContent||"").split(/([,;:.\/\\|])/g).filter(e=>""!==e).map(e=>{let n=/^[,;:.\/\\|]$/.test(e);return'<span class="'.concat(n?"pun":"pln",'">').concat(e,"</span>")}).join(""),t=c?' style="'.concat(c,'"'):"";return'<code class="prettyprint code-in-text prettyprinted"'.concat(t,">").concat(e,"</code>")}let l=0,s=Array.from(n.childNodes).map(n=>n.nodeType===Node.ELEMENT_NODE&&"tr"===n.tagName.toLowerCase()?e(n,t,l++):e(n,t)).join(""),d=Array.from(n.attributes).filter(e=>"class"!==e.name&&"style"!==e.name).map(e=>"".concat(e.name,'="').concat(e.value,'"')).join(" "),m=c?' style="'.concat(c,'"'):"",h=d?" ".concat(d):"";return["img","br","hr","input"].includes(a)?"<".concat(a).concat(h).concat(m," />"):"<".concat(a).concat(h).concat(m,">").concat(s,"</").concat(a,">")})(e,n.styles)).join("");return'<div style="'.concat(o,'">').concat(r,"</div>")}(k,y);await eE(e)?ef.oR.success("已复制到剪贴板，可直接粘贴到微信公众号"):ef.oR.error("复制失败，请手动选择内容复制")}catch(e){console.error("复制失败:",e),ef.oR.error("复制失败，请手动选择内容复制")}};return(0,o.jsxs)("main",{className:"h-screen flex flex-col",children:[(0,o.jsx)(I,{}),(0,o.jsxs)("header",{className:"border-b px-2 sm:px-4 py-2 flex items-center justify-between shrink-0 gap-2",children:[(0,o.jsx)("h1",{className:"text-base sm:text-lg font-semibold whitespace-nowrap",children:"Markdown 编辑器"}),(0,o.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 flex-wrap justify-end",children:[(0,o.jsx)(V,{}),(0,o.jsxs)("div",{className:"hidden sm:flex items-center gap-1",children:[(0,o.jsx)(eb,{}),(0,o.jsx)(eL,{})]})]})]}),(0,o.jsx)("div",{className:"border-b px-2 sm:px-4 py-2 shrink-0 overflow-x-auto",children:(0,o.jsx)(A,{onFormat:C,onCopyToWeChat:z})}),(0,o.jsx)("div",{className:"md:hidden flex-1 flex flex-col min-h-0",children:(0,o.jsxs)(c,{value:t,onValueChange:a,className:"flex-1 flex flex-col",children:[(0,o.jsxs)(l,{className:"mx-4 mt-2 grid w-auto grid-cols-2",children:[(0,o.jsx)(s,{value:"editor",children:"编辑"}),(0,o.jsx)(s,{value:"preview",children:"预览"})]}),(0,o.jsx)(d,{value:"editor",className:"flex-1 p-4 mt-0 min-h-0",children:(0,o.jsx)(m,{ref:N,value:e,onChange:n,className:"h-full"})}),(0,o.jsx)(d,{value:"preview",className:"flex-1 p-4 mt-0 overflow-auto",children:(0,o.jsx)(T,{ref:f,html:k})})]})}),(0,o.jsxs)("div",{className:"hidden md:flex flex-1 min-h-0",children:[(0,o.jsxs)("div",{className:"w-1/2 flex flex-col border-r min-h-0",children:[(0,o.jsxs)("div",{className:"border-b px-4 py-2 flex items-center justify-between shrink-0",children:[(0,o.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"编辑器"}),(0,o.jsxs)(B.m_,{children:[(0,o.jsx)(B.k$,{asChild:!0,children:(0,o.jsx)(R,{variant:u?"secondary":"ghost",size:"icon",className:"h-7 w-7 cursor-pointer",onClick:()=>{let e=!u;p(e),localStorage.setItem(eU,String(e)),ef.oR.success(e?"滚动同步已开启":"滚动同步已关闭")},children:u?(0,o.jsx)(x.A,{className:"h-4 w-4"}):(0,o.jsx)(eM.A,{className:"h-4 w-4"})})}),(0,o.jsx)(B.ZI,{children:u?"关闭滚动同步":"开启滚动同步"})]})]}),(0,o.jsx)("div",{className:"flex-1 p-4 min-h-0",children:(0,o.jsx)(m,{ref:e=>{N&&(N.current=e),g.current=e},value:e,onChange:n,className:"h-full",onKeyDown:S,onScroll:w})})]}),(0,o.jsxs)("div",{className:"w-1/2 flex flex-col min-h-0",children:[(0,o.jsxs)("div",{className:"border-b px-4 py-2 flex items-center justify-between shrink-0",children:[(0,o.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"预览"}),(0,o.jsxs)("div",{className:"flex items-center gap-1",children:[(0,o.jsxs)(B.m_,{children:[(0,o.jsx)(B.k$,{asChild:!0,children:(0,o.jsx)(R,{variant:"desktop"===i?"secondary":"ghost",size:"icon",className:"h-7 w-7 cursor-pointer",onClick:()=>h("desktop"),children:(0,o.jsx)(eO.A,{className:"h-4 w-4"})})}),(0,o.jsx)(B.ZI,{children:"桌面端预览"})]}),(0,o.jsxs)(B.m_,{children:[(0,o.jsx)(B.k$,{asChild:!0,children:(0,o.jsx)(R,{variant:"mobile"===i?"secondary":"ghost",size:"icon",className:"h-7 w-7 cursor-pointer",onClick:()=>h("mobile"),children:(0,o.jsx)(e$.A,{className:"h-4 w-4"})})}),(0,o.jsx)(B.ZI,{children:"移动端预览"})]})]})]}),(0,o.jsx)("div",{ref:e=>{b.current=e},className:"flex-1 p-4 overflow-auto flex justify-center",onScroll:v,children:(0,o.jsx)("div",{className:"mobile"===i?"w-[375px] border rounded-lg shadow-sm bg-background overflow-auto":"w-full",children:(0,o.jsx)(T,{ref:f,html:k,className:"mobile"===i?"p-4":""})})})]})]})]})}}},e=>{var n=n=>e(e.s=n);e.O(0,[232,943,787,441,684,358],()=>n(7360)),_N_E=e.O()}]);